<!DOCTYPE html>
<html lang="en-us"
      xmlns:og="http://ogp.me/ns#"
      xmlns:fb="https://www.facebook.com/2008/fbml">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="author" content="Ryan Wesslen">
    <meta name="description" content="Communicate science and statistics with beautiful graphics">

    <meta name="twitter:card" value="summary_large_image">
    <meta name="twitter:site" content="@ryanwesslen">
    <meta name="twitter:title" content="Problem set 3 | DSBA 5122: Visual Analytics">
    <meta name="twitter:creator" content="@ryanwesslen">
    <meta name="twitter:image" content="/images/dsba5122.png">
    <meta name="twitter:description" content="Communicate science and statistics with beautiful graphics" />

    <meta property="og:site_name" content="DSBA 5122: Visual Analytics"/>
    <meta property="og:title" content="Problem set 3 | DSBA 5122: Visual Analytics">
    <meta property="og:type" content="article" />
    <meta property="article:author" content="" />
    <meta property="og:url" content="/" />
    <meta property="og:image" content="/images/dsba5122.png">
    <meta property="og:description" content="Communicate science and statistics with beautiful graphics" />

    <meta name="generator" content="Hugo 0.51" />    

    <title>Problem set 3 | DSBA 5122: Visual Analytics</title>
    <link rel="canonical" href="/assignment/03-problem-set/">
    <link href="/theme/css/tufte.css" rel="stylesheet">
    <link href="/theme/css/latex.css" rel="stylesheet">
    <link href="/theme/css/custom.css" rel="stylesheet">

    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    <style type="text/css">
        .wrap a, .wrap a:visited {
            color: #046A38;
        }

        .wrap a:hover {
            color: #B9975B;
        }

        .wrap p > a {
            color: #046A38;
        }

        article .sidenote-number:after, article .sidenote:before {
            color: #046A38;
        }

        article .sidenote:before {
            color: #046A38;
        }

        @media (max-width: 760px) {
            label.margin-toggle:not(.sidenote-number) {
                color: #046A38;
            }
        }

        .contrast a, .contrast a:visited {
            color: #046A38; 
        }

        header > nav a {
            color: #046A38;
        }

        .credits a {
            color: #046A38;
        }

        .wrap .tag {
            background: #046A38;
        }
    </style>

    <link rel="shortcut icon" href="/favicon.ico" />
    <link rel="apple-touch-icon-precomposed" sizes="57x57" href="/images/apple-touch-icon-57x57.png" />
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="/images/apple-touch-icon-114x114.png" />
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="/images/apple-touch-icon-72x72.png" />
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/images/apple-touch-icon-144x144.png" />
    <link rel="apple-touch-icon-precomposed" sizes="120x120" href="/images/apple-touch-icon-120x120.png" />
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="/images/apple-touch-icon-152x152.png" />
    <link rel="icon" type="image/png" href="/images/favicon-32x32.png" sizes="32x32" />
    <link rel="icon" type="image/png" href="/images/favicon-16x16.png" sizes="16x16" />
    <meta name="application-name" content="DSBA 5122: Visual Analytics"/>
    <meta name="msapplication-TileColor" content="#FFFFFF" />
    <meta name="msapplication-TileImage" content="/images/mstile-144x144.png" />

    
    <link href="https://fonts.googleapis.com/css?family=Oswald:400,600|Roboto:300,400" rel="stylesheet"> 
<link rel="stylesheet" href="//use.fontawesome.com/releases/v5.2.0/css/all.css" integrity="sha384-hWVjflwFxL6sNzntih27bfxkr27PmbbK/iSvJ+a4+0owXq79v+lsFkW54bOGbiDQ" crossorigin="anonymous">


</head>

<body>
<div class="wrap">
    <header>
        <nav class="group logo-wrap">
            <a href="/" class="logo"><img src="/images/dsba5122.png" alt="Visual Analytics"></a>
            <h1 class="websitetitle"><a href="/">DSBA 5122: Visual Analytics</a></h1>
        </nav>
        <nav class="bottom-group">
            
            <a href="/syllabus/">Syllabus</a>
            
            <a href="/schedule/">Schedule</a>
            
            <a href="/assignments/">Assignments</a>
            
            <a href="https://uncc.instructure.com/courses/110218">Canvas</a>
            
            <a href="https://rstudio.cloud/spaces/22733/">RStudio.cloud</a>
            
            <a href="https://dsba5122fall2019.slack.com">Class Slack</a>
            
            <a href="https://www.datacamp.com/groups/dsba5122-visual-analytics-c9a5d247-7ed7-44d0-bed6-e8d85e26b19e">DataCamp</a>
            
            <a href="/reference/">Reference</a>
            
        </nav>
    </header>


    <article class="group">
    <h1>Problem set 3</h1>

    
    <p class="page-date">Due by <strong>11:59 PM</strong> on Monday, November 18, 2019</p>
    
    
    
<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    background-color: #ffffff;
    color: #a0a0a0;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #a0a0a0;  padding-left: 4px; }
div.sourceCode
  { color: #1f1c1b; background-color: #ffffff; }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span. { color: #1f1c1b; } /* Normal */
code span.al { color: #bf0303; background-color: #f7e6e6; font-weight: bold; } /* Alert */
code span.an { color: #ca60ca; } /* Annotation */
code span.at { color: #0057ae; } /* Attribute */
code span.bn { color: #b08000; } /* BaseN */
code span.bu { color: #644a9b; font-weight: bold; } /* BuiltIn */
code span.cf { color: #1f1c1b; font-weight: bold; } /* ControlFlow */
code span.ch { color: #924c9d; } /* Char */
code span.cn { color: #aa5500; } /* Constant */
code span.co { color: #898887; } /* Comment */
code span.cv { color: #0095ff; } /* CommentVar */
code span.do { color: #607880; } /* Documentation */
code span.dt { color: #0057ae; } /* DataType */
code span.dv { color: #b08000; } /* DecVal */
code span.er { color: #bf0303; text-decoration: underline; } /* Error */
code span.ex { color: #0095ff; font-weight: bold; } /* Extension */
code span.fl { color: #b08000; } /* Float */
code span.fu { color: #644a9b; } /* Function */
code span.im { color: #ff5500; } /* Import */
code span.in { color: #b08000; } /* Information */
code span.kw { color: #1f1c1b; font-weight: bold; } /* Keyword */
code span.op { color: #1f1c1b; } /* Operator */
code span.ot { color: #006e28; } /* Other */
code span.pp { color: #006e28; } /* Preprocessor */
code span.re { color: #0057ae; background-color: #e0e9f8; } /* RegionMarker */
code span.sc { color: #3daee9; } /* SpecialChar */
code span.ss { color: #ff5500; } /* SpecialString */
code span.st { color: #bf0303; } /* String */
code span.va { color: #0057ae; } /* Variable */
code span.vs { color: #bf0303; } /* VerbatimString */
code span.wa { color: #bf0303; } /* Warning */
</style>


<h2 id="task-0-getting-started">Task 0: Getting started</h2>
<p>Create a new RStudio project somewhere on your computer. Open that new folder in Windows File Explorer or macOS Finder (however you navigate around the files on your computer), and create a subfolder there named <code>data</code>.</p>
<p><a href="/files/app.R">Download this R Shiny app template file</a> and place it in your newly-created project<span><label for="sn-1" class="margin-toggle sidenote-number"></label><input type="checkbox" id="sn-1" class="margin-toggle"/><span class="sidenote">You’ll probably have to right click on the link and choose “Save link as…”.<br />
<br />
</span></span>.</p>
<p>You will also need to download three compressed files. You can <a href="/files/prob-set-3-data.zip">download the files as a zip file here</a>. You will need to export them into a subfolder in your project called ‘data’.</p>
<p>In the end, the structure of your new project directory should look something like this:</p>
<pre><code>your-project-name/
  app.R
  your-project-name.Rproj
  data/
    merchant.txt
    romeo.txt
    summer.txt</code></pre>
<h2 id="objective-analyzing-word-counts-in-shakepeares-plays.">Objective: Analyzing word counts in Shakepeare’s plays.</h2>
<p><span><label for="sn-2" class="margin-toggle">&#8853;</label><input type="checkbox" id="sn-2" class="margin-toggle"/><span class="marginnote"> <img src="https://media.giphy.com/media/l4hLAnH7GC9XaQkAo/giphy.gif" alt="Shakespeare" /><br />
<br />
</span></span> For this problem set, you’ll create a Shiny app to explore three of William Shakespeare’s plays through simple data visualizations.</p>
<p><img src="/images/assignment/prb-set-3.gif" /></p>
<p>To create analyze the text, we’ll use the <code>quanteda</code> package.<span><label for="sn-3" class="margin-toggle sidenote-number"></label><input type="checkbox" id="sn-3" class="margin-toggle"/><span class="sidenote">Read <code>quanteda</code>’s <a href="https://quanteda.io/articles/quickstart.html">quick start tutorial</a> if you have questions or want to learn more. If you have problems installing <code>quanteda</code>, please use RStudio.Cloud for this project or google your install errors! The answer is out on the internet, the question is whether you’ll put enough effort to find it.<br />
<br />
</span></span></p>
<p>I provide the template Shiny app.R file and you need to fill in the rest of the app. There is not a lot to create and you can compete this assignment with just about 100 lines of R code in your app.R file!</p>
<p>Be sure to read the instructions carefully! If you skip a step, your app may still run, but you may miss some functionality and you will be deducted a point for each item you omit. See the bottom for an overview on grading.</p>
<h2 id="task-0-libraries">Task 0: Libraries</h2>
<p>To run this problem set, you’ll need six CRAN libraries installed on your RStudio session.</p>
<p>You will need: <code>shiny</code>, <code>quanteda</code>, <code>wordcloud</code>, <code>memoise</code>, <code>ggplot2</code>, <code>shinythemes</code>, and <code>RColorBrewer</code>.</p>
<p>You can manually install them individually (if you don’t have them).<span><label for="sn-4" class="margin-toggle sidenote-number"></label><input type="checkbox" id="sn-4" class="margin-toggle"/><span class="sidenote">Or maybe google how to install multiple CRAN libraries at once to save the time of manually typing in each of these…<br />
<br />
</span></span></p>
<h2 id="task-1-create-the-uis-layout">Task 1: Create the ui’s layout</h2>
<p>First, open your app.R file and add a <code>sidebarLayout</code> with a <code>sidebarPanel</code> on the left and the <code>mainPanel</code> on the right.<span><label for="sn-5" class="margin-toggle sidenote-number"></label><input type="checkbox" id="sn-5" class="margin-toggle"/><span class="sidenote">Be sure to add a comma after the <code>titlePanel</code> function!<br />
<br />
</span></span></p>
<p>Next, create two tabs using the <code>tabsetPanel</code> nested within the <code>mainPanel</code>. The first tab is named “Word Cloud” and the second is named “Counts”. You can leave the second argument blank for now (we’ll fill this in in the next task.)<span><label for="sn-6" class="margin-toggle sidenote-number"></label><input type="checkbox" id="sn-6" class="margin-toggle"/><span class="sidenote">If you have forgotten how to do layouts or tabsets in Shiny, read <a href="https://shiny.rstudio.com/articles/layout-guide.html">this page</a><br />
<br />
</span></span>.</p>
<p>What your app should look like:
<kbd>
<img src="/images/assignment/prb-set-3-1.png">
</kbd></p>
<h2 id="task-2-add-in-the-uis-inputs">Task 2: Add in the ui’s inputs</h2>
<p>Next, you will need to add in six input functions to serve as drop-down selections for the user. These will be pre-processing steps.<span><label for="sn-7" class="margin-toggle sidenote-number"></label><input type="checkbox" id="sn-7" class="margin-toggle"/><span class="sidenote">Use the input section of the <a href="https://shiny.rstudio.com/images/shiny-cheatsheet.pdf">shiny cheatsheet</a> to refresh your memory of the different input function types.<br />
<br />
</span></span></p>
<p>Make sure between each new input you put in a comma or else you’ll get error messages!</p>
<ol style="list-style-type: decimal">
<li>Create a <strong>select input</strong> with a unique id name, label (i.e., what the user will see), and have it’s choices parameter equal <code>books</code>. <code>books</code> will be a list of names of Shakespeare’s three plays.</li>
</ol>
<p>To set what <code>books</code> is, copy and paste this line of code and put it at the top of your app.R file, i.e., below where you call libraries and above (and outside of) the ui function.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># The list of valid books</span>
books &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="st">&quot;A Mid Summer Night&#39;s Dream&quot;</span> =<span class="st"> &quot;summer&quot;</span>,
               <span class="st">&quot;The Merchant of Venice&quot;</span> =<span class="st"> &quot;merchant&quot;</span>,
               <span class="st">&quot;Romeo and Juliet&quot;</span> =<span class="st"> &quot;romeo&quot;</span>)</code></pre>
<ol start="2" style="list-style-type: decimal">
<li><p>Create a <strong>checkbox input</strong> for stemming words. Give it an unique id (e.g., “stem”), an appropriate label, and set its value as FALSE (i.e., <code>value = FALSE</code> as your last parameter). This means that the initial value of this input will be FALSE.</p></li>
<li><p>Create a <strong>checkbox input</strong> for removing punctuation. Give it an unique id (e.g., “punct”), an appropriate label, and set its value as TRUE (i.e., <code>value = TRUE</code> as your last parameter). This means that initially this value will be FALSE.</p></li>
<li><p>Create a <strong>radio buttons</strong> input for setting n-grams. Give it an unique id (e.g., “ngram”), an appropriate label, and set its choices value to:</p></li>
</ol>
<pre class="sourceCode r"><code class="sourceCode r">choices =<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Unigrams only&quot;</span> =<span class="st"> &quot;unigram&quot;</span>,
            <span class="st">&quot;Unigrams &amp; Bigrams&quot;</span> =<span class="st"> &quot;both&quot;</span>,
            <span class="st">&quot;Bigrams only&quot;</span> =<span class="st"> &quot;bigram&quot;</span>)</code></pre>
<p>This means the user will see one of three labels (“Unigrams only”, “Unigrams &amp; Bigrams”, and “Bigrams only”) but the value provided in this input will be either “unigram”, “both”, or “bigram”.</p>
<ol start="5" style="list-style-type: decimal">
<li><p>Create a <strong>slider input</strong> for setting the minimum frequency of words kept in the pre-processing (sparse term threshold). Give it an unique id (e.g., “freq”), an appropriate label, and set its last three parameters as <code>min = 1,  max = 50, value = 10</code>. This sets its initial value as 10 but its minimum and maximum values as 1 and 50 (respectively).</p></li>
<li><p>Next, add in a <strong>horizontal line</strong> by adding <code>hr()</code> and (like all previous UI inputs), be sure to add a comma after it.</p></li>
<li><p>Last, add in an <strong>action button</strong> with an unique ID and an appropriate label (e.g., “Rerun”).</p></li>
</ol>
<p>Your shiny app should now look like this:
<kbd>
<img src="/images/assignment/prb-set-3-2.png">
</kbd></p>
<h2 id="task-3-add-in-your-ui-outputs">Task 3: Add in your UI outputs</h2>
<p>For this step, we’ll add in our UI outputs for the two plots we’ll have in our app.</p>
<p>Each plot will be on a different tab within our <code>mainPanel</code> section.</p>
<ol style="list-style-type: decimal">
<li><p>Add in a plotOutput in your “Word Clouds” tab. Name its object “cloud.”<span><label for="sn-8" class="margin-toggle sidenote-number"></label><input type="checkbox" id="sn-8" class="margin-toggle"/><span class="sidenote">Remember, we have to make sure later on that when we create our wordcloud in the server section to name it as “cloud” so this step will plot the wordcloud in its appropriate tab.<br />
<br />
</span></span></p></li>
<li><p>Add in a plotOutput in your “Counts” tab. Name its object “freq”.</p></li>
</ol>
<p>Your shiny app will look the same as at the end of Task 3.</p>
<h2 id="task-4-add-in-your-text-pre-processing-step">Task 4: Add in your text pre-processing step</h2>
<p>Next, let’s add in our text pre-processing step using <code>quanteda</code>. For this part, we’re going to wrap this step as an R function that takes multiple arguments.</p>
<p>This will be what runs when the user clicks the action button with the arguments being filled in based on what the user selects.</p>
<p>Make sure to put it at the top of the code (before UI function but after calling the libraries). Also make sure to add <code>library(quanteda)</code> as it depends on functions in the <code>quanteda</code> package.</p>
<pre class="sourceCode r"><code class="sourceCode r">getDfm &lt;-<span class="st"> </span><span class="cf">function</span>(book, minterms, stem, punct, ngrams) {
  <span class="co"># check that only one of three books is selected</span>
  <span class="cf">if</span> (<span class="op">!</span>(book <span class="op">%in%</span><span class="st"> </span>books))
    <span class="kw">stop</span>(<span class="st">&quot;Unknown book&quot;</span>)
  
  <span class="co"># looks in data sub-folder for the files (e.g., romeo.txt, merchant.txt, summer.txt)</span>
  text &lt;-<span class="st"> </span><span class="kw">readLines</span>(<span class="kw">sprintf</span>(<span class="st">&quot;./data/%s.txt&quot;</span>, book), <span class="dt">encoding=</span><span class="st">&quot;UTF-8&quot;</span>)
  
  <span class="co"># could also pass text column of dataframe instead</span>
  myCorpus &lt;-<span class="st"> </span><span class="kw">corpus</span>(text)
  
  <span class="co"># if... else if statement depending on </span>
  <span class="cf">if</span>(ngrams <span class="op">==</span><span class="st"> &quot;unigram&quot;</span>){
    ng =<span class="st"> </span><span class="dv">1</span>
  }<span class="cf">else</span> <span class="cf">if</span>(ngrams <span class="op">==</span><span class="st"> &quot;both&quot;</span>){
    ng =<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">2</span>
  }<span class="cf">else</span> <span class="cf">if</span>(ngrams <span class="op">==</span><span class="st"> &quot;bigram&quot;</span>){
    ng =<span class="st"> </span><span class="dv">2</span>
  }
  
  <span class="kw">dfm</span>(myCorpus, <span class="dt">remove =</span> <span class="kw">stopwords</span>(<span class="st">&#39;english&#39;</span>), 
      <span class="dt">remove_punct =</span> punct, <span class="dt">stem =</span> stem, <span class="dt">ngrams =</span> ng) <span class="op">%&gt;%</span>
<span class="st">    </span><span class="kw">dfm_trim</span>(<span class="dt">min_termfreq =</span> minterms, <span class="dt">verbose =</span> <span class="ot">FALSE</span>)
}</code></pre>
<p>Test this function out, i.e., run it once in your console and then see if you can provide correct inputs to get it to run. Make sure you have the correct lookup for your data folder (i.e., txt files!). If you set up your project correctly, this shouldn’t be a problem. But if not, you’ll have lookup errors.</p>
<p>This step only provides initial pre-processing steps (as a function) so it will not change what your Shiny app’s ui looks like.</p>
<h2 id="task-4-add-in-reactivity-to-update-dfm-based-on-inputs">Task 4: Add in reactivity to update dfm based on inputs</h2>
<p>Next, we’ll add in reactivity so that the <code>getDfm</code> function is run whenever the action button in the sidebarPanel is clicked.</p>
<p>To start, please <a href="https://shiny.rstudio.com/articles/reactivity-overview.html">read this tutorial on reactivity</a>. This will make sure you understand reactivity before proceeding.</p>
<p>For this task, add in a <code>reactive</code> function in your server side that includes both <code>({})</code> as its inputs and assigns its output as <code>dfm</code>.</p>
<p>For the <code>reactive</code> function, we want this function to activate when the <code>actionButton</code> in the UI is clicked. Since the button is an input, put the first argument of this function as <code>input$[id of action button]</code>, where <code>[]</code> is whatever id you gave the <code>actionButton</code> in the UI.</p>
<p>Last, within the reactive function add in this function and replace the “…” with the names of your five inputs from parts 1-5 in Task 2.<span><label for="sn-9" class="margin-toggle sidenote-number"></label><input type="checkbox" id="sn-9" class="margin-toggle"/><span class="sidenote">This uses the <code>isolate</code> function, which you can learn <a href="https://shiny.rstudio.com/articles/isolation.html">more about at this tutorial</a>.<br />
<br />
</span></span></p>
<pre class="sourceCode r"><code class="sourceCode r">    <span class="kw">isolate</span>({ <span class="co"># ...but not for anything else</span>
      <span class="kw">withProgress</span>({
        <span class="kw">setProgress</span>(<span class="dt">message =</span> <span class="st">&quot;Processing corpus...&quot;</span>)
        <span class="co"># ... = replace with the five inputs from parts 1-5 in Task 2</span>
        <span class="kw">getDfm</span>(...)
      })
    })</code></pre>
<p>This step again will not change the UI.</p>
<h2 id="task-5-add-in-render-functions-to-complete-server-side">Task 5: Add in render functions to complete server-side</h2>
<p>For our last two steps, we’ll need to set what is in each of the two output plots.</p>
<p>For the wordcloud, we’ll use the <code>textplot_wordcloud</code> function from the <code>quanteda</code> package.<span><label for="sn-10" class="margin-toggle sidenote-number"></label><input type="checkbox" id="sn-10" class="margin-toggle"/><span class="sidenote">FYI, this is a wrapper function from the <code>wordcloud</code> package. Therefore, it’s really using <code>wordcloud</code> but is compatible with <code>quanteda</code> data objects like <code>dfm</code>.<br />
<br />
</span></span></p>
<p>First, we’ll the appropriate render function that aligns with how we specified the wordcloud would appear in the UI (hint: what is the output type in the UI that uses the “cloud” input?). Use that render function and assign it (i.e., <code>&lt;-</code>) to the output object named <code>cloud</code>.<span><label for="sn-11" class="margin-toggle sidenote-number"></label><input type="checkbox" id="sn-11" class="margin-toggle"/><span class="sidenote">Do you remember how to assign output objects after rendering? Hint: it’ll look like ______$cloud. You fill in the blank.<br />
<br />
</span></span></p>
<p>Within the function’s <code>{}</code> brackets, now call the reactive function object. Since this is a reactive object, it’s usually best to assign it to a new object (e.g., <code>v</code>) but make sure to keep the objects <code>()</code> since its a reactive object.<span><label for="sn-12" class="margin-toggle sidenote-number"></label><input type="checkbox" id="sn-12" class="margin-toggle"/><span class="sidenote">For more details, look at <a href="https://shiny.rstudio.com/tutorial/written-tutorial/lesson6/">this tutorial on Reactivity</a>, especially the middle section where they discuss calling reactive objects.<br />
<br />
</span></span></p>
<p>Within your render function (i.e., still inside <code>{}</code> brackets), add in:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">textplot_wordcloud</span>(v, 
                   <span class="dt">min_size=</span><span class="fl">0.5</span>, 
                   <span class="dt">max_size=</span><span class="dv">6</span>, 
                   <span class="dt">max_words=</span><span class="dv">100</span>, 
                   <span class="dt">color=</span><span class="kw">brewer.pal</span>(<span class="dv">8</span>, <span class="st">&quot;Dark2&quot;</span>))</code></pre>
<p>Since this uses <code>brewer.pal()</code> function, be sure to add in <code>library(RColorBrewer)</code> to your library calls at the top of your code.</p>
<p>This assumes that you assigned the reactive <code>dfm</code> as <code>v</code>. All other parameters are values for the wordcloud (e.g., max_size of the words in the word cloud). See <code>?textplot_wordcloud</code> for more details about what the parameters mean.</p>
<p>Next, you’ll need to create a second render function that assigns the object of the <code>freq</code> output object. Like the previous render function, we’ll use the reactive <code>dfm</code> that you’ll need to assign (e.g., can assign <code>v</code> again since a different function).</p>
<p>Next, use this snippet of code to extract the word counts for the top 50 words.</p>
<pre class="sourceCode r"><code class="sourceCode r">dfm_freq &lt;-<span class="st"> </span><span class="kw">textstat_frequency</span>(v, <span class="dt">n =</span> <span class="dv">50</span>)
dfm_freq<span class="op">$</span>feature &lt;-<span class="st"> </span><span class="kw">with</span>(dfm_freq, <span class="kw">reorder</span>(feature, frequency)) <span class="co"># sort in descending</span></code></pre>
<p>Last, we’ll need to use <code>dfm_freq</code> in a ggplot function. Create a <code>ggplot</code> function where its data is <code>dfm_freq</code>, its x mapping is <code>feature</code>, its y mapping is <code>frequency</code>, include a scatter plot (i.e., <code>geom_point()</code>), a coordinate flip function, and set the font for all text as 18 (i.e., add in <code>+ theme(text = element_text(size = 18))</code>)</p>
<p>At this point, your app should look like this:
<kbd>
<img src="/images/assignment/prb-set-3-3.png">
</kbd></p>
<h2 id="task-6-add-in-shinythemes-memoise-function-and-modify-height">Task 6: Add in shinythemes, memoise function, and modify height</h2>
<p>Last, we want to make additional changes that improve the look of our app and its performance.</p>
<ol style="list-style-type: decimal">
<li><p>Shinythemes. Add in the <code>library(shinythemes)</code> to your library call and then add in <code>theme = shinytheme(&quot;cerulean&quot;)</code> as your first argument to your <code>fluidPage()</code> function in your UI. Choose a different <code>shinythemes</code> than “cerulean” using <a href="https://rstudio.github.io/shinythemes/">this website</a> (e.g., “cosmo”, “united”, etc.).</p></li>
<li><p>Modify the height of the frequency plot. If you look at the “Counts” tab, your plot is likely “squished” vertically. Let’s increase the height of this plot by add in the parameter <code>height = &quot;600px&quot;</code> in the <code>plotOutput</code> function after the <code>freq</code> object. This is how you manually modify the size of your outputs. The same applies to <code>width</code>. View <code>?plotOutput</code> to see the other parameters you can pass to the function.</p></li>
<li><p>Wrap your getDfm function with the function: <code>memoise()</code>. (That is, it should now look like <code>getDfm &lt;- memoise(function(...))</code> ). This function will cache your dfm so if you select it a second time, it’ll already have it cached. While our dataset this isn’t too critical, this can be a crucial step for caching if our corpora were very large.</p></li>
</ol>
<p>Depending on what shinythemes you selected (e.g., this is “cerulean”), your final app should look like this:
<kbd>
<img src="/images/assignment/prb-set-3-4.png">
</kbd></p>
<h2 id="task-7-deploy-to-shinyapps.io">Task 7: Deploy to shinyapps.io</h2>
<p>If you’ve gotten this far, all that’s left is submission.</p>
<p>You will need to submit your project’s folder (as a compressed zip file) <strong>and</strong> deploy your app on shinyapps.io.</p>
<p>Compress your folder as a .zip file and submit it to Canvas by 11:59pm on Monday, April 8, 2019.</p>
<p>Next, deploy your Shiny app to your shinyapps.io account. If you have not already set up your login to shinyapps.io, see <a href="https://shiny.rstudio.com/articles/shinyapps.html">this page for a recount of how to do this</a>.</p>
<h2 id="grading">Grading</h2>
<p>Your five points for this project will be allocated:</p>
<ul>
<li><p>2 points if successfully submitted shiny app to shinyapps.io</p></li>
<li><p>3 points if you provide the successful shiny app as a compressed folder to Canvas.</p></li>
</ul>
<p>You will get 1 point deductions for incorrect problems on your app (e.g., if you forget to include certain functionality). If your code does not run independently (that is, your zip folder cannot be run independent), you will lose 2 points.</p>
<p>As always, do <strong>not</strong> set your working directory (that’s what R projects are for).</p>
<h2 id="help-i-got-an-error.">Help! I got an error.</h2>
<p>Three step process:</p>
<ol style="list-style-type: decimal">
<li><p>Describe your error message in words, perhaps adding in “shiny”.</p></li>
<li><p>Copy and paste this into your favorite search engine.</p></li>
<li><p>Read. Repeat by refining your keyword search.</p></li>
</ol>
<p>If this doesn’t work, consider these questions:</p>
<ol style="list-style-type: decimal">
<li><p>Do you have unique names for your inputs and outputs and are they correctly assigned?</p></li>
<li><p>Did you call all the libraries mentioned in Task 0?</p></li>
<li><p>Did you make sure not to include a <code>install.packages()</code>?<span><label for="sn-13" class="margin-toggle sidenote-number"></label><input type="checkbox" id="sn-13" class="margin-toggle"/><span class="sidenote">Remember you only need to run these once. No code should have this uncommented.<br />
<br />
</span></span></p></li>
<li><p>Work backwards, i.e., can you complete task 1? task 2? task 5? If you can identify which task, this will lead you to figure out where your problem is. Similarly, remove one related function / block of code to determine when your app starts working again.</p></li>
<li><p>Consider using the <code>browser()</code> function. Read this post on <a href="https://shiny.rstudio.com/articles/debugging.html">debugging in shiny</a>.</p></li>
</ol>


    </article>

    <footer>
        <hr class="slender">

        <div class="course-info">
        <span class="course-name">
            DSBA 5122: Visual Analytics (Fall 2019)
        </span><br>
        <span>
            <a href="https://www.uncc.edu">University of North Carolina at Charlotte</a> | 
            <a href="https://dsba.uncc.edu/">Data Science &amp; Business Analytics Program</a>
        </span>
        </div>

        <ul class="footer-links">
            <li>
            <a href="https://wesslen.netlify.com"><i class="fas fa-user"></i> Ryan Wesslen</a>
            </li>

            <li>
            <a href="mailto:rwesslen@uncc.edu"><i class="fas fa-envelope"></i> rwesslen@uncc.edu</a>
            </li>

            <li>
            <i class="far fa-calendar-alt"></i> Mondays
            </li>

            <li>
            <i class="far fa-clock"></i> 6:00–8:45 PM
            </li>

            <li>
            <i class="fas fa-university"></i> CenterCity 904
            </li>

            <li>
            <a href="https://twitter.com/ryanwesslen"><i class="fab fa-twitter"></i></a>
            </li>

            <li>
            <a href="https://github.com/wesslen/dsba5122-fall2019"><i class="fab fa-github"></i></a>
            </li>
        </ul>

        <div class="credits">
        <span class="credit">All content licensed under a <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License</a>.</span><br>

        <span class="credit">Content <i class="fab fa-creative-commons"></i> 2019 <a href="https://wesslen.netlify.com">Ryan Wesslen</a></span><br>
        <span class="credit">Original <a href="https://datavizf18.classes.andrewheiss.com/">website</a> by <a href="https://www.andrewheiss.com/">Andrew Heiss</a>.</span><br>

        <span class="credit">This site created with the <a href="https://github.com/andrewheiss/ath-tufte-hugo_18-19">ath-tufte-hugo theme</a> in <a href="https://bookdown.org/yihui/blogdown/">blogdown</a> and <a href="https://gohugo.io/">Hugo</a>.</span>
        </div>
    </footer>

    

</div>
</body>
</html>

